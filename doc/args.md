# 运行参数 (Args)

在使用 gin_core 框架启动项目时，可以通过命令行参数来指定一些关键配置信息。以下是对各个运行参数的详细说明：

## 一、参数列表

|参数|说明| 默认值     |
|---|---|---------|
| env |运行环境, 建议: dev 和 prod, 运行环境会影响加载的配置文件, 详见[配置文件](###配置文件) | default |
| conf |配置文件所在文件夹路径, 详见[配置文件](###配置文件)| ./conf |
| cipherKey |解密key, 当配置文件中含加密内容时使用, 解密失败时不阻断服务启动| 空字符串 |

## 二、参数指定顺序
### 运行环境 env
1. **运行参数优先**
    
    首先从运行参数中获取 env 的值，如果该值不为空，则将其作为当前的运行环境变量。
示例命令：
    ```bash
    go run main.go --env dev
    ```

2. **env 文件读取**
    
    若运行参数中未指定 env 或其值为空，则尝试从 env 文件中读取运行环境信息。框架会读取 env 文件的首行内容，并使用正则表达式 [a-zA-Z0-9_]+ 进行匹配，匹配到的内容即为运行环境。

3. **默认值**

    若上述两种方式都未能成功获取到运行环境信息，则使用默认值 default 作为运行环境。


## 三、配置文件加载规则

### 多环境配置支持

框架支持根据不同的运行环境加载不同的配置文件，具体规则如下：

1. **默认配置文件**

    无论指定的运行环境是什么，框架都会首先尝试加载默认配置文件 `config.default.yml`，该文件位于 `config` 参数指定的文件夹下。

2. **自定义配置文件**

    如果指定的运行环境不是 `default`，框架会尝试加载与该运行环境对应的自定义配置文件，文件名格式为 `config.{env}.yml`，其中 `{env}` 为具体的运行环境名称。例如，当 `env` 为 `dev` 时，框架会尝试加载 `config.dev.yml` 文件。

### 示例

假设我们希望在开发环境下启动项目，并且指定配置文件路径为 `./custom_conf`，可以使用以下命令：
```bash
go run main.go --env dev --config ./custom_conf
```

框架会按照以下顺序加载配置文件：
1. 尝试加载 `./custom_conf/config.default.yml` 文件。
2. 尝试加载 `./custom_conf/config.dev.yml` 文件。

## 四、配置文件加密

如果配置文件中包含加密内容，可以使用 `cipherKey` 参数指定解密密钥。示例命令如下：
```bash
go run main.go --env prod --config ./conf --cipherKey your_secret_key
```

注意：解密失败时不会阻断服务启动，但可能会导致部分配置信息无法正确加载。

通过合理使用这些运行参数，可以灵活地配置项目的运行环境和加载不同的配置文件，以满足不同场景下的开发和部署需求。